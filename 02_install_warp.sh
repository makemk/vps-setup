#!/bin/bash
echo -e "\033[32m---> [2/4] 安装 WARP SOCKS5 代理 (进入交互模式) \033[0m"

echo "========================================================"
echo "🚨 请注意：接下来的步骤需要您手动选择！"
echo "1. 提示运行脚本时，输入 [1]"
echo "2. 提示设置端口时，输入 [40000]"
echo "3. 提示账户类型时，输入 [1] (免费账户)"
echo "========================================================"
sleep 3

# --- 关键修改：去掉了 echo 管道，保留 w 参数直接运行 ---
bash <(curl -fsSL https://gitlab.com/fscarmen/warp/-/raw/main/menu.sh) w

# 2. 简单的健康检查
echo "正在检查端口..."
sleep 3
if netstat -nlp | grep -q 40000; then
    echo "✅ WARP 代理已成功运行在 127.0.0.1:40000"
else
    echo "⚠️ 警告: 端口 40000 未检测到，请确认您刚才是否正确输入了端口。"
fi
